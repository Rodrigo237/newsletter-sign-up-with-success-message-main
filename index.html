<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link rel="stylesheet" href="./assets/css/styles.css">
  
  <title>Frontend Mentor | Newsletter sign-up form with success message</title>
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
  </style>
</head>
<body>

  <section class="sign-form">
    <div class="field-text">
          <h1>Stay updated!</h1>
          <p>Join 60,000+ product managers receiving monthly updates on:</p>
          <ul class="feature-list">
              <li>
                <img src="./assets/images/icon-list.svg" alt="Check icon" class="icon-list">
                Product discovery and building what matters
              </li>
              <li>
                <img src="./assets/images/icon-list.svg" alt="Check icon" class="icon-list">
                Measuring to ensure updates are a success
              </li>
              <li>
                <img src="./assets/images/icon-list.svg" alt="Check icon" class="icon-list">
                And much more!
              </li>
          </ul>
          <span>Email address</span>
          <span id="email-error" style="color:#ff527b; font-size:10px; display:none; margin-top:6px; text-align: end;">Valid email is required</span>
          <input type="email" name="email" id="email" title="Only @loremcompany.com employees can register" autocomplete="off" pattern="^[a-zA-Z0-9_.+]+@loremcompany\.com$" required>
          <button class="button-subs">Subscribe to monthly newsletter</button>
    </div>
    <div class="image-intro">
        <img src="./assets/images/illustration-sign-up-desktop.svg" alt="">
    </div>

  </section>
  <div class="success-message" style="display: none;">
      <div class="container-btn">
          <img src="./assets/images/icon-list.svg" alt="Success">
          <h1>Thanks for subscribing!</h1>
          <p>A confirmation email has been sent to <b id="user-email"></b>.<br> 
          Please open it and click the button inside to confirm your subscription.</p>
          <button class="button-subs" id="dismiss-btn">Dismiss message</button>
      </div>   
  </div>
  <script>
      const form = document.querySelector('.sign-form');
      const emailInput = document.getElementById('email');
      const errorSpan = document.getElementById('email-error');
      const button = document.querySelector('.button-subs');
      const successMsg = document.querySelector(".success-message");
      const userEmail = document.getElementById('user-email');
      const dismissBtn = document.getElementById('dismiss-btn');

      button.addEventListener('click', function(e) {
        if (!emailInput.checkValidity()) {
          errorSpan.style.display = 'block';
          e.preventDefault();
          emailInput.style.color = "#ff6a3a"
          emailInput.border =  "1.5px solid #ff527b";
        } else {
          errorSpan.style.display = 'none';
          e.preventDefault();
          form.style.display = 'none';
          successMsg.style.display = 'flex';
          userEmail.textContent = emailInput.value;
        }
      });

      emailInput.addEventListener('input', function() {
        errorSpan.style.display = 'none';
      });

      dismissBtn.addEventListener('click',function(){
        successMsg.style.display = 'none';
        form.style.display = 'flex';
        emailInput.value = '';
      })
  </script>

</body>
</html>